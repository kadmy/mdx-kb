/**
 * @file concepts.js
 * @description Единый источник данных для концепций базы знаний.
 * Структура подготовлена для будущей миграции в БД.
 */

/**
 * @typedef {Object} Concept
 * @property {string} id - Уникальный идентификатор концепции
 * @property {string} title - Название концепции
 * @property {string} description - Краткое описание
 * @property {string} content - Полное содержание концепции (может быть MDX)
 * @property {string} category - Категория концепции
 * @property {string[]} [relatedTerms] - Связанные термины
 * @property {string[]} [relatedConcepts] - Связанные концепции
 */

/**
 * Словарь концепций базы знаний.
 * @type {Object.<string, Concept>}
 */
export const CONCEPTS = {
  'zamysel-vsevyshnego': {
    id: 'zamysel-vsevyshnego',
    title: 'Замысел Всевышнего',
    description: 'Божественный план и цель творения: создать себе сыновей для олам а-ба',
    category: 'Берешит',
    relatedTerms: ['решит', 'логос', 'йешуа'],
    relatedConcepts: ['chto-est-chelovek', 'tsel-zhizni'],
    content: `
# Замысел Всевышнего

Божественный план и цель творения: создать себе сыновей для олам а-ба (будущего мира).

## Основные аспекты

- **Цель творения**: Всевышний желает иметь сыновей, которые будут подобны Ему
- **Логос**: Замысел материализован в Йешуа
- **Семейное дело**: Передача от Авраама к Ицхаку и Якову

## Практическое понимание

- Вера = попадание в Замысел
- Чтение Торы в свете Замысла
- Синхронизация с желаниями Всевышнего

## Связь с другими концепциями

- Что есть человек
- Цель жизни
- Спасение
    `.trim(),
  },

  'chto-est-chelovek': {
    id: 'chto-est-chelovek',
    title: 'Что есть человек',
    description: 'Духовная сущность, созданная по образу, с потенциалом подобия Всевышнему',
    category: 'Берешит',
    relatedTerms: ['дух', 'дмут', 'подобие'],
    relatedConcepts: ['zamysel-vsevyshnego', 'tsel-zhizni'],
    content: `
# Что есть человек

Духовная сущность, созданная по образу, с потенциалом подобия Всевышнему, временно связанная с телом.

## Природа человека

- Духовная сущность, временно облеченная в материальное тело
- Создан по образу (дмут) Всевышнего
- Обладает потенциалом уподобиться Творцу

## Предназначение

Человек создан для того, чтобы стать сыном Всевышнего, обретя максимальное подобие Творцу.
    `.trim(),
  },

  'pervorodniy-greh': {
    id: 'pervorodniy-greh',
    title: 'Первородный грех',
    description: 'Результат питания с Дерева "тов вэ-ра" - способность оценивать без Всевышнего',
    category: 'Берешит',
    relatedTerms: ['грех', 'нахаш', 'тамут'],
    relatedConcepts: ['spasenie', 'tshuvа'],
    content: `
# Первородный грех

Результат питания с Дерева "тов вэ-ра" (добро и зло) - способность оценивать без Всевышнего.

## Суть греха

Не просто непослушание, но обретение способности самостоятельно определять добро и зло, независимо от Всевышнего.

## Последствия

- Отделение от Всевышнего
- Состояние "тамут" (смерть)
- Невозможность слышать истину
- Служение Нахашу вместо Творца
    `.trim(),
  },

  'tsel-zhizni': {
    id: 'tsel-zhizni',
    title: 'Цель жизни',
    description: 'Преобразоваться в максимальное подобие Всевышнему',
    category: 'Берешит',
    relatedTerms: ['подобие', 'рост', 'тшува'],
    relatedConcepts: ['zamysel-vsevyshnego', 'spasenie'],
    content: `
# Цель жизни

Преобразоваться в максимальное подобие Всевышнему, "вернуться к своему Ка" (егип.).

## Путь реализации

- Внутренняя работа над собой
- Тшува - возвращение к жизни в замысле
- Духовный рост - обретение качеств сына Всевышнего
    `.trim(),
  },

  'spasenie': {
    id: 'spasenie',
    title: 'Спасение',
    description: 'Исправление в себе служения Нахашу, обретение сыновства Всевышнему',
    category: 'Процессы и состояния',
    relatedTerms: ['йешуа', 'тшува', 'нахаш'],
    relatedConcepts: ['zamysel-vsevyshnego', 'tshuvа'],
    content: `
# Спасение

Исправление в себе служения Нахашу, обретение сыновства Всевышнему.

## Суть спасения

- Не просто избавление от наказания
- Восстановление сыновних отношений со Всевышним
- Освобождение от власти Нахаша

## Путь спасения

- Йешуа - материализация Логоса, Замысла Всевышнего
- Тшува - возвращение к жизни в Замысле
- Внутренняя работа
    `.trim(),
  },

  'edinstvo': {
    id: 'edinstvo',
    title: 'Единство',
    description: 'Внутренняя близость',
    category: 'Диалектические понятия',
    relatedTerms: ['единство', 'семья'],
    relatedConcepts: ['semya', 'eden'],
    content: `
# Единство

Внутренняя близость, глубокая связь на духовном уровне.

## Природа единства

- Не просто физическая близость
- Духовная общность
- Сонастроенность сердец
    `.trim(),
  },

  'duh': {
    id: 'duh',
    title: 'Дух',
    description: 'Нематериальная субстанция, часть невидимой реальности',
    category: 'Мистические концепции',
    relatedTerms: ['дух'],
    relatedConcepts: ['svet', 'zhizn'],
    content: `
# Дух

Нематериальная субстанция, часть невидимой реальности.

## Свойства духа

- Невидим для физических глаз
- Реален и действенен
- Источник жизни
    `.trim(),
  },

  'eden': {
    id: 'eden',
    title: 'Эден',
    description: 'Сад духовной жизни, место соединения с Всевышним',
    category: 'Мистические концепции',
    relatedTerms: ['эден'],
    relatedConcepts: ['edinstvo', 'svet'],
    content: `
# Эден (Сад Эдена)

Сад духовной жизни, место соединения с Всевышним.

## Суть Эдена

- Не просто географическое место
- Состояние близости и единства со Всевышним
- Место духовного питания
    `.trim(),
  },

  'svet': {
    id: 'svet',
    title: 'Свет',
    description: 'Ясность, тепло, созидание',
    category: 'Диалектические понятия',
    relatedTerms: ['свет', 'тьма'],
    relatedConcepts: ['tma', 'duh'],
    content: `
# Свет

Ясность, тепло, созидание.

## Проявления света

- Духовная ясность, понимание
- Тепло близости с Всевышним
- Созидательная сила

## Противоположность

Тьма - непонимание, ступор, тяжесть
    `.trim(),
  },

  'materia': {
    id: 'materia',
    title: 'Материя',
    description: 'Физический аспект творения, инструмент реализации Замысла',
    category: 'Диалектические понятия',
    relatedTerms: [],
    relatedConcepts: ['svet', 'zamysel-vsevyshnego'],
    content: `
# Материя

Физический аспект творения, инструмент реализации Замысла Всевышнего.

## Роль материи

- Условия для духовного развития
- Арена для проявления подобия
- Временное облачение для духовной сущности
    `.trim(),
  },

  'semya': {
    id: 'semya',
    title: 'Семья',
    description: 'Духовная общность',
    category: 'Диалектические понятия',
    relatedTerms: ['семья', 'семейное дело'],
    relatedConcepts: ['edinstvo'],
    content: `
# Семья

Духовная общность, единство на глубинном уровне.

## Суть семьи

- Не просто кровное родство
- Духовная близость
- Передача духовного знания из поколения в поколение (семейное дело)
    `.trim(),
  },

  'vera': {
    id: 'vera',
    title: 'Вера',
    description: 'Попадание в Замысел Всевышнего',
    category: 'Внутренняя работа и практики',
    relatedTerms: [],
    relatedConcepts: ['zamysel-vsevyshnego'],
    content: `
# Вера

Попадание в Замысел Всевышнего, синхронизация с Его желаниями.

## Природа веры

- Не слепое принятие доктрин
- Живая связь с Всевышним
- Следование Его Голосу
    `.trim(),
  },

  'vnutrennyaya-rabota': {
    id: 'vnutrennyaya-rabota',
    title: 'Внутренняя работа',
    description: 'Перемена мнения (метанойа) через исследование изъянов в своей картине мира',
    category: 'Внутренняя работа и практики',
    relatedTerms: ['внутренняя работа', 'КВС', 'картина', 'сжатие сердца'],
    relatedConcepts: ['tshuvа'],
    content: `
# Внутренняя работа

Перемена мнения (метанойа) через исследование изъянов в своей картине мира, проявившихся в моменты сердечного сопротивления правде и боли от происходящего.

## Процесс

1. Бодрствование - наблюдение за сердцем
2. Обнаружение сжатия сердца
3. Исследование через КВС (Карту Внутренних Событий)
4. Выявление изъяна в картине мира
5. Тшува - перемена мнения, возвращение к правде
    `.trim(),
  },

  'bedstvie': {
    id: 'bedstvie',
    title: 'Бедствие',
    description: 'Незнание или отход от Пути спасения',
    category: 'Процессы и состояния',
    relatedTerms: ['бедствие'],
    relatedConcepts: ['spasenie'],
    content: `
# Бедствие

Незнание или отход от Пути спасения.

## Суть бедствия

- Не внешние обстоятельства, а внутреннее состояние
- Отдаленность от Всевышнего
- Пребывание вне Его Замысла
    `.trim(),
  },

  'zhizn-smert': {
    id: 'zhizn-smert',
    title: 'Жизнь - смерть',
    description: 'Диалектическая пара: жизнь - следование желаниям Всевышнего, смерть - жизнь в промахах',
    category: 'Процессы и состояния',
    relatedTerms: ['жизнь', 'смерть', 'грех'],
    relatedConcepts: ['spasenie', 'tshuvа'],
    content: `
# Жизнь - смерть

Жизнь: следование желаниям сердца. Вечная жизнь - следование желаниям Всевышнего.
Смерть: жизнь в промахах (грехах).

## Понимание

- Смерть - не прекращение существования
- Смерть - состояние отделенности от Источника жизни
- Жизнь - единство со Всевышним
    `.trim(),
  },

  'pravda': {
    id: 'pravda',
    title: 'Правда',
    description: 'То, что соответствует реальности, что известно Всевышнему как факт',
    category: 'Диалектические понятия',
    relatedTerms: ['правда', 'открытость', 'лукавство'],
    relatedConcepts: [],
    content: `
# Правда

То, что соответствует реальности, что известно Всевышнему как факт.

## Значение правды

- Соответствие реальности
- Не зависит от нашего мнения
- Ведет к свободе и жизни
    `.trim(),
  },
};

/**
 * Получить концепцию по ID
 * @param {string} id - ID концепции
 * @returns {Concept|null} Объект концепции или null
 */
export function getConcept(id) {
  return CONCEPTS[id] || null;
}

/**
 * Получить все концепции определенной категории
 * @param {string} category - Название категории
 * @returns {Array<Concept>} Массив концепций
 */
export function getConceptsByCategory(category) {
  return Object.values(CONCEPTS).filter(concept => concept.category === category);
}

/**
 * Получить список всех категорий концепций
 * @returns {string[]} Уникальный список категорий
 */
export function getConceptCategories() {
  return [...new Set(Object.values(CONCEPTS).map(concept => concept.category))];
}

/**
 * Поиск концепций по тексту
 * @param {string} query - Поисковый запрос
 * @returns {Array<Concept>} Массив найденных концепций
 */
export function searchConcepts(query) {
  const lowerQuery = query.toLowerCase();
  return Object.values(CONCEPTS).filter(concept =>
    concept.title.toLowerCase().includes(lowerQuery) ||
    concept.description.toLowerCase().includes(lowerQuery) ||
    concept.content.toLowerCase().includes(lowerQuery)
  );
}